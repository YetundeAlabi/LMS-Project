{% extends 'base.html' %}
{% load embed_video_tags %}

{% block content %}


<div class="row">
  <div class="col-md">
    <h3>Add new content:</h3>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'text' %}">Text</a>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'image' %}">Image</a>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'video' %}">Video</a>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'file' %}">File</a>
  </div>
</div>

<div class="row">
  <div class="col-md grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <p class="card-title mb-0">Sub Topics</p>
        <div class="table-responsive">
          <table class="table table-striped-lms table-hover">
            <tbody>
              {% for subtopic in subtopics %}
<tr>
  <td style="height: 100px; overflow: hidden;">
    <h4>Sub topic: {{ forloop.counter }}</h4>
    <h4>Topic: {{ subtopic.topic }}</h4>
    <h2>Subtopic title: {{ subtopic.title }}</h2>

    {% if subtopic.content_type.model == 'text' %}
    <h4>Text Content:</h4>
    <p>{{ subtopic.item.text }}</p>

    {% elif subtopic.content_type.model == 'file' %}
    {% if subtopic.item.file.url %}
    {% if subtopic.item.file.url|lower|slice:'-4:' == ".jpg" or subtopic.item.file.url|lower|slice:'-5:' == ".jpeg" or subtopic.item.file.url|lower|slice:'-4:' == ".png" %}
    <h4>Image Content:</h4>
    <img src="{{ subtopic.item.get_file_url }}" alt="{{ item.title }}">
    {% else %}
    <h4>File Content:</h4>
    <p>
      <a href="{{ subtopic.item.get_file_url }}" class="button">Download file</a>
    </p>
    {% endif %}
    {% endif %}

    {% elif subtopic.content_type.model == 'video' %}
    <h4>Video Content:</h4>
    {% video subtopic.item.url "small" %}
    {% endif %}

    <div class="row">
      <div class="col-md-3 grid-margin stretch-card" style="height: 50px;">
        <div class="card card-tale" style="background-color: #3575c9; width: 1px;">
          <div class="card-body d-flex justify-content-center align-items-center">
            <h1 class="display1">
              <a style="color: inherit; font-size: medium;" href="{% url 'course:update_subtopic' subtopic.topic.course.slug subtopic.topic.id subtopic.content_type.model subtopic.id %}">Update</a>
            </h1>
          </div>
        </div>
      </div>
      <div class="col-md-3 grid-margin stretch-card" style="height: 50px; width: 20px;">
        <div class="card card-tale" style="background-color: #cf2c13; padding: 1px;">
          <div class="card-body d-flex justify-content-center align-items-center">
            <h1 class="display1">
              <a style="color: inherit; font-size: medium;" href="{% url 'course:delete_subtopic' subtopic.id %}">Delete</a>
            </h1>
          </div>
        </div>
      </div>
    </div>
    <hr>
  </td>
</tr>
{% endfor %}

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>


{% endblock content %}

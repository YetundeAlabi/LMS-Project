{% extends 'base.html' %}
{% load embed_video_tags %}

{% block navbar %}
        {% include 'tutor/tutor_nav_bar.html' %}
{% endblock %} 
{% block content %}
<div class="content-wrapper">
<div class="row">
  <div class="col-md">
    <h3>Add new Lesson:</h3>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'text' %}">Text</a>
    <a class="btn btn-info mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'video' %}">Video</a>
    <a class="btn btn-danger mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'file' %}">File</a>
    <a class="btn btn-warning mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'file' %}">Image</a>
  </div>
</div>

{% if subtopics %}
<div class="row">
  <div class="col-md grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <p class="card-title mb-0">Lessons in {{topic.title}}</p>
        <div class="table-responsive">
          <table class="table table-striped-lms table-hover">
            <thead>
              <tr>
                <th>S/N</th>
                <th>Title</th>
                <th>Content_type</th>

              </tr>
            </thead>
            <tbody>
              {% for subtopic in subtopics %}
              <tr>
                <td>Lession:{{ forloop.counter }}</td>
                <td>{{ subtopic.item.title }}</td>
                <td>
                  {% if subtopic.content_type.model == 'text' %}
                    <h5>Text</h5>
                  {% elif subtopic.content_type.model == 'file' %}
                    {% if subtopic.item.file.url %}
                      {% if subtopic.item.file.url|lower|slice:'-4:' == ".jpg" or subtopic.item.file.url|lower|slice:'-5:' == ".jpeg" or subtopic.item.file.url|lower|slice:'-4:' == ".png" %}
                        <h5>Image</h5>
                      {% else %}
                        <h5>pdf</h5>
                      {% endif %}
                    {% endif %}
                  {% elif subtopic.content_type.model == 'video' %}
                    <h5>Video</h5>
                  {% endif %}
                </td>
                

                <td style="padding: 0;">
                  <div class="row" style="margin: 0;">
                    <div class="col-md-2 mt-4" style="padding: 0;">
                      <div class="d-flex justify-content-start">
                        <a class="btn btn-info mb-4 mr-2" href="{% url 'course:subtopic_detail' course_slug=topic.course.slug topic_id=topic.id model_name=subtopic.content_type.model id=subtopic.id %}" style="font-size: 12px; padding: 12px 20px;">View</a>
                      </div>
                    </div>
                  </div>
                </td>

              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% else %}
<p>No subtopic under this topic yet</p>
{% endif %}

{% endblock content %}

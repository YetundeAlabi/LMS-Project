{% extends 'base.html' %}
{% load embed_video_tags %}

{% block content %}


<div class="row">
  <div class="col-md">
    <h3>Add new content:</h3>
    <a class="btn btn-primary mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'text' %}">Text</a>
    <a class="btn btn-info mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'video' %}">Video</a>
    <a class="btn btn-danger mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'file' %}">File</a>
    <a class="btn btn-warning mt-4 mb-4" href="{% url 'course:create_subtopic' topic.course.slug topic.id 'file' %}">Image</a>
  </div>
</div>
{% if subtopics %}
<div class="row">
  <div class="col-md grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <p class="card-title mb-0">Sub-Topics</p>
        <div class="table-responsive">
          <table class="table table-striped-lms table-hover">
            <tbody>
              {% for subtopic in subtopics %}
<tr>
  <td style="height: 100px; overflow: hidden;">
    <h4>S/N: {{ forloop.counter }}</h4>
    <h4>Topic: {{ subtopic.topic }}</h4>
    <h6>Subtopic title: {{ subtopic.title }}</h6>

    {% if subtopic.content_type.model == 'text' %}
    <h5><b>Content Type</b>: Text </h5>
    <p><b>Content</b>:{{ subtopic.item.text }}</p>

    {% elif subtopic.content_type.model == 'file' %}
    {% if subtopic.item.file.url %}
    {% if subtopic.item.file.url|lower|slice:'-4:' == ".jpg" or subtopic.item.file.url|lower|slice:'-5:' == ".jpeg" or subtopic.item.file.url|lower|slice:'-4:' == ".png" %}
    <h5><b>Content Type</b>: Image/pdf </h5>
    <img style="width: 300px; height: 300px;" src="{{ subtopic.item.get_file_url }}" alt="{{ item.title }}">
    {% else %}
    <h4>File Content</h4>
    <p>
      <a href="{{ subtopic.item.get_file_url }}" class="button">View file</a>
    </p>
    {% endif %}
    {% endif %}

    {% elif subtopic.content_type.model == 'video' %}
    <h5><b>Content Type</b>: Video </h5>
    {% video subtopic.item.url "small" %}
    {% endif %}

    <div class="row">
      <div class="col-md-3 grid-margin stretch-card" style="height: 50px;">
        <div class="card card-tale" style="background-color: #3575c9; width: 1px;">
          <div class="card-body d-flex justify-content-center align-items-center">
            <h1 class="display1">
              <a style="color: inherit; font-size: medium;" href="{% url 'course:update_subtopic' subtopic.topic.course.slug subtopic.topic.id subtopic.content_type.model subtopic.id %}">Update</a>
            </h1>
          </div>
        </div>
      </div>
      <div class="col-md-3 grid-margin stretch-card" style="height: 50px; width: 20px;">
        <div class="card card-tale" style="background-color: #cf2c13; padding: 1px;">
          <div class="card-body d-flex justify-content-center align-items-center">
            <h1 class="display1">
              <a style="color: inherit; font-size: medium;" href="{% url 'course:delete_subtopic' subtopic.id %}">Delete</a>
            </h1>
          </div>
        </div>
      </div>
    </div>
    <hr>
  </td>
</tr>
{% endfor %}

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% else %}
<p>No subtopic under this topic yet</p>
{% endif %}

{% endblock content %}

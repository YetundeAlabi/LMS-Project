{% extends 'base.html' %}
{% load embed_video_tags %}

{% block navbar %}
    {% include 'student/side_bar.html' %}
{% endblock %} 

{% block content %}

<!-- Main Content -->
<div class="content-wrapper">

    <div class="row">
        <a class="btn btn-secondary btn-sm mb-4" href="{% url 'student:topic_list' student_course_slug=student_course.course.slug pk=student_course.pk %}"><i class="fas fa-arrow-left ml-2 mr-2"></i></a>
    </div>
    
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h1 class="card-title" style="font-size: 2.125rem;">{{ student_subtopic.sub_topic.item.title }} </h1>
                <h5 class="text-muted mb-4">{{ student_subtopic.sub_topic.description }}</h5>

                {% if student_subtopic.sub_topic.content_type.model == 'text' %}
                    <h5>Content Type: Text</h5>
                    <blockquote class="blockquote mt-3">
                        <p>{{ student_subtopic.sub_topic.item.text }}
                        </p>
                    </blockquote>
                {% elif student_subtopic.sub_topic.content_type.model == 'file' %}
                    {% if student_subtopic.sub_topic.item.file.url %}
                        {% if student_subtopic.sub_topic.item.file.url|lower|slice:'-4:' == ".jpg" or student_subtopic.sub_topic.item.file.url|lower|slice:'-5:' == ".jpeg" or student_subtopic.sub_topic.item.file.url|lower|slice:'-4:' == ".png" %}
                            <h5>Content Type: Image</h5>
                            <img src="{{ student_subtopic.sub_topic.item.get_file_url }}" style="height: 500px; width: 1000px;">
                        {% else %}
                            <h5>Content Type: PDF</h5>
                            <p>
                                <a href="{{ student_subtopic.sub_topic.item.get_file_url }}" class="button">View File</a>
                            </p>
                            <iframe src="{{ student_subtopic.sub_topic.item.get_file_url }}" width="100%" height="500px" frameborder="0" scrolling="auto"></iframe>
                            <a href="{{ student_subtopic.sub_topic.item.get_file_url }}">Download</a>
                        {% endif %}
                    {% endif %}
                {% elif student_subtopic.sub_topic.content_type.model == 'video' %}
                    <h5>Content Type: Video</h5>
                {% video student_subtopic.sub_topic.item.url "small" %}
                
             
                {% elif student_subtopic.sub_topic.content_type.model == 'video' %}
                <h5>Content Type: Video</h5>
                {% video student_subtopic.sub_topic.item.url "small" %}
                {% endif %}
            </div>

            <!-- Next and Previous Buttons -->
            <div class="navigation-buttons">
                {% if previous_subtopic %}
                    <a href="{% url 'student:student_subtopic_detail' student_course_slug=student_course_slug pk=student_course.id student_topic_slug=student_topic_slug student_subtopic_id=previous_subtopic.id %}" class="btn btn-primary mt-3">Previous</a>
                {% endif %}
                {% if next_subtopic %}
                    <a href="{% url 'student:student_subtopic_detail' student_course_slug=student_course_slug pk=student_course.id student_topic_slug=student_topic_slug student_subtopic_id=next_subtopic.id %}" class="btn btn-primary mt-3">Next</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}